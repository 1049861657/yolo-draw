# YOLO船舶标注工具

这是一个用于处理YOLO检测结果的船舶图像标注工具。该工具可以加载YOLO格式的图像和标签文件，允许用户查看并修改船舶的类型标签，支持标注框的交互式编辑，并能将标注完成的文件按类别分类保存到指定的目标文件夹。

## 功能特点

- 浏览和加载YOLO格式的图像和对应txt标签文件
- 在图像上显示检测框并支持交互式查看与编辑
- 支持拖拽调整边界框位置和大小
- 支持多种船舶类型标注：渔船、油轮、集装箱船、客船、散货船、拖船、军舰、工程船
- 支持按ID对图像进行分组浏览，方便批量处理
- 便捷的船舶类型标签修改界面，一键标注并移动
- 提供"审核模式"，可选择是否保留原文件
- 标注完成后自动将文件按船舶类型分类保存到目标文件夹

## 使用方法

1. 环境设置：
```bash
# 使用 uv 包管理器安装依赖
uv sync
```

2. 运行程序：
```bash
python main.py
```

3. 在程序界面中：
   - 选择源文件目录（包含原始YOLO检测的images和labels子文件夹）
   - 选择目标文件夹（用于存放已标注的文件）
   - 点击"加载图像"按钮，程序会自动分析并按ID将图像分组显示
   - 在左侧列表中选择需要标注的图像
   - 在图像预览区查看边界框（可拖拽边界框角点调整大小和位置）
   - 点击下方对应的船舶类型按钮，完成标注并移动文件
   - 可选择"审核模式"，在该模式下舍弃图像时会删除原文件

## 文件格式

### YOLO标签格式
```
<class_id> <center_x> <center_y> <width> <height>
```
所有值都是归一化到0-1范围的浮点数：
- class_id: 对应船舶类型编号（0-7）
- center_x, center_y: 边界框中心点坐标（相对于图像宽高的比例）
- width, height: 边界框的宽和高（相对于图像宽高的比例）

## 项目结构

```
yolo-draw/
├── main.py                    # 主程序入口
├── config.py                  # 全局配置文件
├── models/                    # 数据模型
│   ├── __init__.py
│   └── yolo_label.py          # YOLO标签处理模型
├── ui/                        # 用户界面
│   ├── __init__.py
│   └── main_window_qt.py      # 主窗口实现 (PySide6)
├── utils/                     # 工具函数
│   ├── __init__.py
│   ├── file_utils.py          # 文件操作工具
│   └── image_utils.py         # 图像处理工具
├── resources/                 # 资源文件
│   ├── ship_types.json        # 船舶类型定义
├── build.py                   # 应用打包脚本
├── pyproject.toml             # 项目依赖管理
└── uv.lock                    # uv锁定文件
```

## 开发环境

- Python 3.12
- PySide6 6.9.0 (GUI界面)
- Pillow 11.2.1 (图像处理)
- UV (依赖管理)

## 打包分发

可以使用build.py脚本进行应用打包：

```bash
python build.py
```

打包后的应用将保存在output目录下。